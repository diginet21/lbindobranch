"use strict";(self["webpackChunklbindobranch"]=self["webpackChunklbindobranch"]||[]).push([[452],{4452:(e,l,t)=>{t.r(l),t.d(l,{default:()=>Ue});t(5363);var a=t(3673),d=t(2323),o=t(1959),u=t(8880),s=t(3617),n=t(1525),r=t(4434),i=t(9582);t(5474);const m={class:"q-py-sm"},_={class:"row items-center q-gutter-x-md"},c={class:"title"},p={class:"flex justify-end q-gutter-x-sm"},v={key:0},b={class:"card-column q-pa-md"},w=(0,a._)("div",{class:"card-title"},[(0,a._)("h2",null,"Customer Info")],-1),h={class:"q-gutter-y-sm"},f={class:"card-column q-pa-md"},U=(0,a._)("div",{class:"card-title"},[(0,a._)("h2",null,"Additional Cost")],-1),y={class:"q-gutter-y-sm"},g={class:"card-column q-pa-md"},S=(0,a._)("div",{class:"card-title"},[(0,a._)("h2",null,"Order Info")],-1),q={class:"q-gutter-y-sm"},W={class:"card-column q-pa-md"},V=(0,a._)("div",{class:"card-title"},[(0,a._)("h2",null,"Order Items")],-1),k={class:"table striped"},x=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Description"),(0,a._)("th",null,"Qty"),(0,a._)("th",null,"Price"),(0,a._)("th",null,"Subtotal")])],-1),z={class:"column items-end q-mt-md"},C={class:"table dense bolder align-right"},Z=(0,a._)("td",null,"Subtotal",-1),O=(0,a._)("td",null,"Rp",-1),Q=(0,a._)("td",null,"Rp",-1),I={key:0},R=(0,a._)("td",null,"Shipping Fee",-1),D=(0,a._)("td",null,"Rp",-1),j={key:1},$=(0,a._)("div",null,"Additional Cost",-1),F={key:0,class:"text-caption"},P=(0,a._)("td",null,"Rp",-1),A=(0,a._)("td",null,"Total Order",-1),B=(0,a._)("td",null,"Rp",-1),H={class:"table dense bolder q-mt-md align-right"},T=(0,a._)("td",null,"Grand Total",-1),E=(0,a._)("td",null,"Rp",-1),K={class:"card-column q-pa-md"},N=(0,a._)("div",{class:"card-title"},[(0,a._)("h2",null,"Payments")],-1),M=(0,a.Uk)("Reference"),Y=(0,a.Uk)("Method"),G=(0,a.Uk)("Type"),L=(0,a.Uk)("Status"),J=(0,a.Uk)("Amount"),X={class:"q-gutter-x-sm flex justify-end q-pa-lg"},ee=(0,a._)("div",{class:"text-md"},"Resi Number",-1),le={class:"q-mt-md q-gutter-x-sm flex justify-end"},te={setup(e){const l=(0,s.oR)(),t=(0,i.yj)(),te=(0,o.iH)(null),ae=()=>{l.dispatch("order/getById",t.params.id).then((e=>{200==e.status&&(te.value=e.data.data,oe(e.data.data))}))},de=(0,o.iH)(""),oe=e=>{ue.id=e.id,ue.customer_name=e.customer_name,ue.customer_phone=e.customer_phone,ue.customer_email=e.customer_email,ue.customer_address=e.customer_address,ue.order_status=e.order_status,ue.order_note=e.order_note,ue.order_tax=e.order_tax,ue.shipping_cost=e.shipping_cost,ue.order_subtotal=e.order_subtotal,ue.additional_cost_amount=e.additional_cost_amount?e.additional_cost_amount:"",ue.additional_cost_description=e.additional_cost_description?e.additional_cost_description:"",de.value=e.invoice_id},ue=(0,o.qj)({id:"",_method:"PUT",customer_name:"",customer_phone:"",customer_email:"",customer_address:"",order_note:"",order_tax:"",order_status:"",additional_cost_amount:"",shipping_cost:"",additional_cost_description:"",order_subtotal:""});(0,a.bv)((()=>ae()));const se=(0,o.Fl)({get(){return ue.additional_cost_amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},set(e){e&&(ue.additional_cost_amount=e.split(".").join(""))}}),ne=(0,o.Fl)((()=>parseInt(ue.order_subtotal)*parseInt(ue.order_tax)/100)),re=(0,o.Fl)((()=>ue.additional_cost_amount.length?parseInt(ue.additional_cost_amount):0)),ie=(0,o.Fl)((()=>te.value.order_subtotal+re.value+te.value.shipping_cost)),me=(0,o.Fl)((()=>ie.value+ne.value)),_e=()=>{l.dispatch("order/update",ue)},ce=(0,o.Fl)((()=>l.state.order.order_status)),pe=()=>{n.Z.create({title:"Konfirmasi",message:'Ini akan merubah status pesanan menjadi "PROCESS"',cancel:!0}).onOk((()=>{ve()}))},ve=()=>{l.dispatch("order/process",te.value.id).then((()=>{ae(),r.Z.create({type:"positive",message:"Order has been successfully updated",position:"top-right"}),l.dispatch("order/getOrders")}))},be=(0,o.iH)(!1),we=(0,o.iH)(""),he=()=>{be.value=!0},fe=()=>{be.value=!1,l.dispatch("order/inputResi",{order_id:te.value.id,resi_code:we.value}).then((()=>{ae(),r.Z.create({type:"positive",message:"Order has been successfully updated",position:"top-right"}),l.dispatch("order/getOrders")}))};return(e,l)=>{const t=(0,a.up)("q-breadcrumbs-el"),s=(0,a.up)("q-breadcrumbs"),n=(0,a.up)("q-btn"),r=(0,a.up)("q-input"),i=(0,a.up)("money-formatter"),ae=(0,a.up)("q-select"),oe=(0,a.up)("q-item-section"),re=(0,a.up)("q-item"),ve=(0,a.up)("q-list"),Ue=(0,a.up)("q-form"),ye=(0,a.up)("q-card-section"),ge=(0,a.up)("q-card"),Se=(0,a.up)("q-dialog"),qe=(0,a.up)("q-page"),We=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(qe,{padding:""},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a._)("div",_,[(0,a._)("div",c,"Edit Order "+(0,d.zw)(de.value),1)]),(0,a.Wm)(s,{class:"text-grey","active-color":"secondary"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{label:"Dashboard"}),(0,a.Wm)(t,{label:"Order"})])),_:1})]),(0,a._)("div",p,[(0,a.Wm)(n,{onClick:pe,color:"primary",size:"13px",label:"Process Order"}),(0,a.Wm)(n,{onClick:he,color:"primary",size:"13px",label:"Input Resi"})]),te.value?((0,a.wg)(),(0,a.iD)("div",v,[(0,a._)("div",b,[w,(0,a._)("div",h,[(0,a.Wm)(r,{filled:"",label:"Customer Name",modelValue:(0,o.SU)(ue).customer_name,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,o.SU)(ue).customer_name=e)},null,8,["modelValue"]),(0,a.Wm)(r,{filled:"",label:"Customer Email",modelValue:(0,o.SU)(ue).customer_email,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,o.SU)(ue).customer_email=e)},null,8,["modelValue"]),(0,a.Wm)(r,{filled:"",label:"Customer Phone ",modelValue:(0,o.SU)(ue).customer_phone,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,o.SU)(ue).customer_phone=e)},null,8,["modelValue"]),(0,a.Wm)(r,{filled:"",type:"textarea",label:"Customer Address",modelValue:(0,o.SU)(ue).customer_address,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,o.SU)(ue).customer_address=e)},null,8,["modelValue"])])]),(0,a._)("div",f,[U,(0,a._)("div",y,[(0,a.Wm)(i,{modelValue:(0,o.SU)(se),"onUpdate:modelValue":l[4]||(l[4]=e=>(0,o.dq)(se)?se.value=e:null),label:"Additional Cost Amount"},null,8,["modelValue"]),(0,a.Wm)(r,{filled:"",label:"Additional Cost Description",modelValue:(0,o.SU)(ue).additional_cost_description,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,o.SU)(ue).additional_cost_description=e)},null,8,["modelValue"])])]),(0,a._)("div",g,[S,(0,a._)("div",q,[(0,a.Wm)(r,{filled:"",label:"Order Tax",modelValue:(0,o.SU)(ue).order_tax,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,o.SU)(ue).order_tax=e),suffix:"%"},null,8,["modelValue"]),(0,a.Wm)(r,{filled:"",label:"Shipping Cost",modelValue:(0,o.SU)(ue).shipping_cost,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,o.SU)(ue).shipping_cost=e)},null,8,["modelValue"]),(0,a.Wm)(ae,{filled:"",modelValue:(0,o.SU)(ue).order_status,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,o.SU)(ue).order_status=e),label:"Order Status",options:(0,o.SU)(ce)},null,8,["modelValue","options"]),(0,a.Wm)(r,{filled:"",type:"textarea",modelValue:(0,o.SU)(ue).order_note,"onUpdate:modelValue":l[9]||(l[9]=e=>(0,o.SU)(ue).order_note=e),label:"Order Note"},null,8,["modelValue"])])]),(0,a._)("div",W,[V,(0,a._)("table",k,[x,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(te.value.items,(l=>((0,a.wg)(),(0,a.iD)("tr",{key:l.id},[(0,a._)("td",null,(0,d.zw)(l.product_name),1),(0,a._)("td",null,(0,d.zw)(l.quantity),1),(0,a._)("td",null,(0,d.zw)(e.$money(l.product_price)),1),(0,a._)("td",null,(0,d.zw)(e.$money(l.product_price*l.quantity)),1)])))),128))])]),(0,a._)("div",z,[(0,a._)("table",C,[(0,a._)("tr",null,[Z,O,(0,a._)("td",null,(0,d.zw)(e.$money(te.value.order_subtotal)),1)]),(0,a._)("tr",null,[(0,a._)("td",null,"Tax ("+(0,d.zw)(te.value.order_tax)+"%)",1),Q,(0,a._)("td",null,(0,d.zw)(e.$money((0,o.SU)(ne))),1)]),te.value.shipping_cost?((0,a.wg)(),(0,a.iD)("tr",I,[R,D,(0,a._)("td",null,(0,d.zw)(e.$money(te.value.shipping_cost)),1)])):(0,a.kq)("",!0),(0,o.SU)(ue).additional_cost_amount?((0,a.wg)(),(0,a.iD)("tr",j,[(0,a._)("td",null,[$,(0,o.SU)(ue).additional_cost_description?((0,a.wg)(),(0,a.iD)("div",F,"("+(0,d.zw)((0,o.SU)(ue).additional_cost_description)+")",1)):(0,a.kq)("",!0)]),P,(0,a._)("td",null,(0,d.zw)(e.$money((0,o.SU)(ue).additional_cost_amount)),1)])):(0,a.kq)("",!0),(0,a._)("tr",null,[A,B,(0,a._)("td",null,(0,d.zw)(e.$money((0,o.SU)(ie))),1)])]),(0,a._)("table",H,[(0,a._)("tr",null,[T,E,(0,a._)("td",null,(0,d.zw)(e.$money((0,o.SU)(me))),1)])])])]),(0,a._)("div",K,[N,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(te.value.payments,(l=>((0,a.wg)(),(0,a.j4)(ve,{key:l.id,separator:"",class:"q-mb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(re,null,{default:(0,a.w5)((()=>[(0,a.Wm)(oe,null,{default:(0,a.w5)((()=>[M])),_:1}),(0,a.Wm)(oe,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(l.ref),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(re,null,{default:(0,a.w5)((()=>[(0,a.Wm)(oe,null,{default:(0,a.w5)((()=>[Y])),_:1}),(0,a.Wm)(oe,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(l.method.split("_").join(" ")),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(re,null,{default:(0,a.w5)((()=>[(0,a.Wm)(oe,null,{default:(0,a.w5)((()=>[G])),_:1}),(0,a.Wm)(oe,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(l.payment_type),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(re,null,{default:(0,a.w5)((()=>[(0,a.Wm)(oe,null,{default:(0,a.w5)((()=>[L])),_:1}),(0,a.Wm)(oe,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(l.status),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(re,null,{default:(0,a.w5)((()=>[(0,a.Wm)(oe,null,{default:(0,a.w5)((()=>[J])),_:1}),(0,a.Wm)(oe,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Rp "+(0,d.zw)(e.$money(l.amount)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])])):(0,a.kq)("",!0),(0,a._)("div",X,[(0,a.Wm)(n,{label:"Back",color:"primary",outline:"",to:{name:"OrderIndex"}}),(0,a.Wm)(n,{onClick:_e,label:"Update",color:"primary",unelevated:""})]),(0,a.Wm)(Se,{modelValue:be.value,"onUpdate:modelValue":l[11]||(l[11]=e=>be.value=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(ge,{class:"card-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(ye,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Ue,{onSubmit:(0,u.iM)(fe,["prevent"])},{default:(0,a.w5)((()=>[ee,(0,a.Wm)(r,{required:"",modelValue:we.value,"onUpdate:modelValue":l[10]||(l[10]=e=>we.value=e)},null,8,["modelValue"]),(0,a._)("div",le,[(0,a.wy)((0,a.Wm)(n,{outline:"",color:"primary",label:"Cancel"},null,512),[[We]]),(0,a.Wm)(n,{unelavated:"",color:"primary",type:"submit",label:"Submit"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}};var ae=t(4379),de=t(1481),oe=t(5926),ue=t(2165),se=t(4842),ne=t(9396),re=t(7011),ie=t(3414),me=t(2035),_e=t(6778),ce=t(151),pe=t(5589),ve=t(5269),be=t(677),we=t(7518),he=t.n(we);const fe=te,Ue=fe;he()(te,"components",{QPage:ae.Z,QBreadcrumbs:de.Z,QBreadcrumbsEl:oe.Z,QBtn:ue.Z,QInput:se.Z,QSelect:ne.Z,QList:re.Z,QItem:ie.Z,QItemSection:me.Z,QDialog:_e.Z,QCard:ce.Z,QCardSection:pe.Z,QForm:ve.Z}),he()(te,"directives",{ClosePopup:be.Z})}}]);