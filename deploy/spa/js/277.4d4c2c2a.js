"use strict";(self["webpackChunklbindobranch"]=self["webpackChunklbindobranch"]||[]).push([[277],{9277:(e,l,t)=>{t.r(l),t.d(l,{default:()=>C});t(71),t(5363);var o=t(3673),a=t(8880),n=t(1959),d=t(3617),i=t(9582);const u={class:"q-py-sm"},m=(0,o._)("div",{class:"row items-center q-gutter-x-md"},[(0,o._)("div",{class:"title"},"Edit New Vehicle")],-1),s={class:"row form-container"},p={class:"col q-pa-sm"},c={class:"card-box"},r={class:"q-gutter-y-md"},_=(0,o.Uk)(" No results "),b={class:"row q-gutter-sm"},g={class:"col"},y={class:"col"},w={class:"q-mt-xl",style:{"min-height":"200px"}},v={class:"flex justify-between items-center q-mb-md"},h=(0,o._)("div",{class:"text-md"},"Down Payments",-1),k={key:0,class:"text-center q-pt-lg"},U={class:"submit-block"},S={setup(e){const l=(0,d.oR)(),t=(0,i.yj)(),S=(0,n.Fl)((()=>l.getters["vehicle/getAllOptions"])),V=(0,n.Fl)((()=>l.state.vehicle.vehicle_master)),q=(0,n.iH)([]),f=(0,n.iH)(null);(0,o.wF)((()=>{V.value.length||l.dispatch("vehicle/getAll"),x()}));const W=(0,n.qj)({id:"",_method:"PUT",vehicle_id:"",sell_price:"",booking_type:"",booking_amount:"",down_payments:[]}),x=()=>{l.dispatch("vehicle/getById",t.params.id).then((e=>{if(200==e.status){let l=e.data.data;f.value=l,W.id=l.id,W.vehicle_id=l.vehicle_id,W.booking_type=l.booking_type,W.sell_price=l.sell_price,W.booking_amount=l.booking_amount,W.down_payments=l.down_payments.length?l.down_payments.map((e=>e)):[{dp_type:"Amount",dp_amount:""}];let t={value:l.vehicle_id,label:l.vehicle.title+" "+j(l.vehicle.price)};q.value=[...S.value],q.value.push(t),console.log(W)}}))},A=(0,n.Fl)((()=>l.state.loading)),j=e=>"Rp "+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),Q=()=>{l.dispatch("vehicle/update",W)},Z=["Percent","Amount"],F=()=>{W.down_payments.push({dp_type:"Amount",dp_amount:""})},P=e=>{W.down_payments.splice(e,1)};return(e,l)=>{const t=(0,o.up)("q-breadcrumbs-el"),d=(0,o.up)("q-breadcrumbs"),i=(0,o.up)("q-item-section"),S=(0,o.up)("q-item"),V=(0,o.up)("q-select"),f=(0,o.up)("money-formatter"),x=(0,o.up)("q-input"),j=(0,o.up)("q-btn"),B=(0,o.up)("q-list"),D=(0,o.up)("q-form"),C=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(C,{padding:""},{default:(0,o.w5)((()=>[(0,o._)("div",u,[m,(0,o.Wm)(d,{class:"text-grey","active-color":"secondary"},{default:(0,o.w5)((()=>[(0,o.Wm)(t,{label:"Dashboard"}),(0,o.Wm)(t,{label:"Vehicles"}),(0,o.Wm)(t,{label:"New"})])),_:1})]),(0,o.Wm)(D,{onSubmit:(0,a.iM)(Q,["prevent"])},{default:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o._)("div",p,[(0,o._)("div",c,[(0,o._)("div",r,[(0,o.Wm)(V,{outlined:"",required:"",label:"Select Vehicle",modelValue:(0,n.SU)(W).vehicle_id,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,n.SU)(W).vehicle_id=e),options:q.value,"map-options":"","emit-value":""},{"no-option":(0,o.w5)((()=>[(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"text-grey"},{default:(0,o.w5)((()=>[_])),_:1})])),_:1})])),_:1},8,["modelValue","options"]),(0,o.Wm)(f,{label:"Sell Price",outlined:"",modelValue:(0,n.SU)(W).sell_price,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,n.SU)(W).sell_price=e)},null,8,["modelValue"]),(0,o._)("div",b,[(0,o._)("div",g,[(0,o.Wm)(V,{outlined:"",required:"",label:"Booking Fee Type",modelValue:(0,n.SU)(W).booking_type,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,n.SU)(W).booking_type=e),options:Z,"map-options":"","emit-value":""},null,8,["modelValue"])]),(0,o._)("div",y,["Amount"==(0,n.SU)(W).booking_type?((0,o.wg)(),(0,o.j4)(f,{key:0,outlined:"",required:"",modelValue:(0,n.SU)(W).booking_amount,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,n.SU)(W).booking_amount=e),label:"Booking Fee Amount"},null,8,["modelValue"])):((0,o.wg)(),(0,o.j4)(x,{key:1,outlined:"",required:"",modelValue:(0,n.SU)(W).booking_amount,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,n.SU)(W).booking_amount=e),label:"Booking Fee Amount",mask:"###"},null,8,["modelValue"]))])])]),(0,o._)("div",w,[(0,o._)("div",v,[h,(0,o.Wm)(j,{label:"Add Down Payment Field",color:"primary",size:"12px",onClick:F})]),(0,o._)("div",null,[(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,n.SU)(W).down_payments,((e,l)=>((0,o.wg)(),(0,o.j4)(S,{key:l},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V,{outlined:"",required:"",label:"DP Type",modelValue:(0,n.SU)(W).down_payments[l].dp_type,"onUpdate:modelValue":e=>(0,n.SU)(W).down_payments[l].dp_type=e,options:Z,"map-options":"","emit-value":""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,o.Wm)(i,{class:"col"},{default:(0,o.w5)((()=>["Amount"==(0,n.SU)(W).down_payments[l].dp_type?((0,o.wg)(),(0,o.j4)(f,{key:0,outlined:"",required:"",modelValue:(0,n.SU)(W).down_payments[l].dp_amount,"onUpdate:modelValue":e=>(0,n.SU)(W).down_payments[l].dp_amount=e,label:"DP Amount"},null,8,["modelValue","onUpdate:modelValue"])):((0,o.wg)(),(0,o.j4)(x,{key:1,outlined:"",required:"",modelValue:(0,n.SU)(W).down_payments[l].dp_amount,"onUpdate:modelValue":e=>(0,n.SU)(W).down_payments[l].dp_amount=e,label:"DP Amount",mask:"##"},null,8,["modelValue","onUpdate:modelValue"]))])),_:2},1024),(0,o.Wm)(i,{side:""},{default:(0,o.w5)((()=>[(0,n.SU)(W).down_payments.length>1?((0,o.wg)(),(0,o.j4)(j,{key:0,icon:"delete",round:"",onClick:e=>P(l),color:"red",unelevated:"",size:"sm"},null,8,["onClick"])):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,n.SU)(W).down_payments.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",k,"Tidak ada data"))])]),(0,o._)("div",U,[(0,o.Wm)(j,{padding:"6px 24px",loading:(0,n.SU)(A),type:"submit",label:"Submit",color:"primary",unelevated:""},null,8,["loading"]),(0,o.Wm)(j,{padding:"6px 24px",disable:(0,n.SU)(A),label:"Cancel",class:"bg-white",color:"primary",outline:"",to:"/vehicles"},null,8,["disable"])])])])])])),_:1},8,["onSubmit"])])),_:1})}}};var V=t(4379),q=t(1481),f=t(5926),W=t(5269),x=t(9396),A=t(3414),j=t(2035),Q=t(4842),Z=t(2165),F=t(7011),P=t(7518),B=t.n(P);const D=S,C=D;B()(S,"components",{QPage:V.Z,QBreadcrumbs:q.Z,QBreadcrumbsEl:f.Z,QForm:W.Z,QSelect:x.Z,QItem:A.Z,QItemSection:j.Z,QInput:Q.Z,QBtn:Z.Z,QList:F.Z})}}]);