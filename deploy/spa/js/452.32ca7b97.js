"use strict";(self["webpackChunklbindobranch"]=self["webpackChunklbindobranch"]||[]).push([[452],{4452:(e,l,t)=>{t.r(l),t.d(l,{default:()=>we});t(5363),t(9544);var a=t(3673),d=t(2323),u=t(1959),o=t(8880),s=t(3617),n=t(6611),r=t(6249),i=t(6417),m=t(9582);t(5474);const _={class:"q-py-sm"},c={class:"row items-center q-gutter-x-md"},p={class:"title"},w={key:0,class:"flex justify-end q-gutter-x-sm"},v={key:1},f={class:"card-column q-pa-md"},b=(0,a._)("div",{class:"card-title"},[(0,a._)("h2",null,"Products")],-1),h={class:"table striped"},y=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Description"),(0,a._)("th",null,"Qty"),(0,a._)("th",null,"Price"),(0,a._)("th",null,"Amount")])],-1),W={class:"card-column q-pa-md"},U=(0,a._)("div",{class:"card-title justify-between"},[(0,a._)("h2",null,"Order Info")],-1),g=(0,a.Uk)("INVOICE"),k=(0,a.Uk)("Payment Type"),q=(0,a.Uk)("Type"),V=(0,a.Uk)("Status"),S=(0,a.Uk)("Subtotal"),I=(0,a.Uk)("Discount"),x=(0,a.Uk)("Additional Cost"),z=(0,a.Uk)("Tax Total"),C=(0,a.Uk)("Order Total"),O={class:"card-title q-pa-md"},Z=(0,a._)("h4",null,"Edit Order",-1),D={class:"q-gutter-y-sm"},Q={class:"card-column q-pa-md"},R=(0,a._)("div",{class:"card-title justify-between"},[(0,a._)("h2",null,"Customer Info")],-1),j={class:"q-gutter-y-sm q-px-md"},P={class:"card-column q-pa-md"},A=(0,a._)("div",{class:"card-title"},[(0,a._)("h2",null,"Additional Cost")],-1),T={class:"q-gutter-y-sm"},H={class:"card-column q-pa-md"},B=(0,a._)("div",{class:"card-title"},[(0,a._)("h2",null,"Invoices")],-1),F={class:"table-responsive"},$={class:"table striped"},E=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Reference"),(0,a._)("th",null,"Payment Method"),(0,a._)("th",null,"Type"),(0,a._)("th",null,"Status"),(0,a._)("th",null,"Customer Fee"),(0,a._)("th",null,"Total Amount")])],-1),N={class:"q-gutter-x-sm flex justify-end q-pa-lg"},K=(0,a._)("div",{class:"text-md q-mb-sm"},"Resi Number",-1),L={class:"q-mt-md q-gutter-x-sm flex justify-end"},M={setup(e){const l=(0,s.oR)(),t=(0,m.yj)(),M=(0,u.iH)(null),Y=()=>{l.dispatch("order/getById",t.params.id).then((e=>{200==e.status&&(M.value=e.data.data,J(e.data.data))}))},G=(0,u.iH)(""),J=e=>{X.id=e.id,X.customer_name=e.customer_name,X.customer_phone=e.customer_phone,X.customer_email=e.customer_email,X.customer_address=e.customer_address,X.order_status=e.order_status,X.order_note=e.order_note,X.order_tax=e.order_tax,X.shipping_cost=e.shipping_cost,X.order_subtotal=e.order_subtotal,X.additional_cost_amount=e.additional_cost_amount?e.additional_cost_amount:"",X.additional_cost_description=e.additional_cost_description?e.additional_cost_description:"",G.value=e.invoice_id},X=(0,u.qj)({id:"",_method:"PUT",customer_name:"",customer_phone:"",customer_email:"",customer_address:"",order_note:"",order_tax:"",order_status:"",additional_cost_amount:"",shipping_cost:"",additional_cost_description:"",order_subtotal:0});(0,a.bv)((()=>Y()));const ee=(0,u.Fl)({get(){return X.additional_cost_amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},set(e){e&&(X.additional_cost_amount=e.split(".").join(""))}}),le=(0,u.Fl)((()=>parseInt(X.order_subtotal)*parseInt(X.order_tax)/100)),te=(0,u.Fl)((()=>X.additional_cost_amount.length?parseInt(X.additional_cost_amount):0)),ae=(0,u.Fl)((()=>M.value.order_subtotal+te.value+M.value.shipping_cost)),de=((0,u.Fl)((()=>ae.value+le.value)),()=>{r.Z.show(),l.dispatch("order/update",X).then((()=>{Y(),i.Z.create({type:"positive",message:"Order has been successfully updated",position:"top-right"}),l.dispatch("order/getOrders")})).finally((()=>r.Z.hide()))}),ue=(0,u.Fl)((()=>l.state.order.order_status_options)),oe=()=>{n.Z.create({title:"Konfirmasi",message:'Ini akan merubah status pesanan menjadi "PROCESS"',cancel:!0}).onOk((()=>{se()}))},se=()=>{l.dispatch("order/process",M.value.id).then((()=>{Y(),i.Z.create({type:"positive",message:"Order has been successfully updated",position:"top-right"}),l.dispatch("order/getOrders")}))},ne=()=>{n.Z.create({title:"Konfirmasi Pembatalan",message:"Ini akan membatalkan order",cancel:!0}).onOk((()=>{re()}))},re=()=>{l.dispatch("order/abort",M.value.id).then((()=>{Y(),i.Z.create({type:"positive",message:"Order has been successfully updated",position:"top-right"}),l.dispatch("order/getOrders")}))},ie=(0,u.iH)(!1),me=(0,u.iH)(""),_e=()=>{ie.value=!0},ce=()=>{ie.value=!1,l.dispatch("order/inputResi",{order_id:M.value.id,resi_code:me.value}).then((()=>{Y(),i.Z.create({type:"positive",message:"Order has been successfully updated",position:"top-right"}),l.dispatch("order/getOrders")}))},pe=(0,u.iH)(!1);(0,u.iH)(!1);return(e,l)=>{const t=(0,a.up)("q-breadcrumbs-el"),s=(0,a.up)("q-breadcrumbs"),n=(0,a.up)("q-btn"),r=(0,a.up)("q-item-section"),i=(0,a.up)("q-item"),m=(0,a.up)("q-badge"),Y=(0,a.up)("q-item-label"),J=(0,a.up)("q-list"),le=(0,a.up)("q-select"),te=(0,a.up)("q-input"),ae=(0,a.up)("q-card-section"),se=(0,a.up)("q-card"),re=(0,a.up)("q-dialog"),we=(0,a.up)("money-formatter"),ve=(0,a.up)("q-form"),fe=(0,a.up)("q-page"),be=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(fe,{padding:""},{default:(0,a.w5)((()=>[(0,a._)("div",_,[(0,a._)("div",c,[(0,a._)("div",p,"Order "+(0,d.zw)(G.value),1)]),(0,a.Wm)(s,{class:"text-grey","active-color":"secondary"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{label:"Dashboard"}),(0,a.Wm)(t,{label:"Order"})])),_:1})]),M.value?((0,a.wg)(),(0,a.iD)("div",w,[(0,a.Wm)(n,{to:{name:"OrderIndex"},color:"grey-8",size:"13px",label:"Back"}),(0,a.Wm)(n,{onClick:oe,color:"blue",size:"13px",label:"Process Order"}),(0,a.Wm)(n,{onClick:_e,color:"purple",size:"13px",label:"Input Resi"}),"PENDING"==M.value.order_status||"UNPAID"==M.value.order_status?((0,a.wg)(),(0,a.j4)(n,{key:0,onClick:ne,color:"red",size:"13px",label:"Cancel Order"})):(0,a.kq)("",!0)])):(0,a.kq)("",!0),M.value?((0,a.wg)(),(0,a.iD)("div",v,[(0,a._)("div",f,[b,(0,a._)("table",h,[y,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(M.value.items,(l=>((0,a.wg)(),(0,a.iD)("tr",{key:l.id},[(0,a._)("td",null,(0,d.zw)(l.product_name),1),(0,a._)("td",null,(0,d.zw)(l.quantity),1),(0,a._)("td",null,"IDR "+(0,d.zw)(e.$money(l.product_price)),1),(0,a._)("td",null,"IDR "+(0,d.zw)(e.$money(l.product_price*l.quantity)),1)])))),128))])])]),(0,a._)("div",W,[U,(0,a.Wm)(J,{separator:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[g])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(M.value.invoice_id),1)])),_:1})])),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[k])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(M.value.is_cash_payment?"CASH":"KREDIT"),1)])),_:1})])),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[q])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(M.value.type_label),1)])),_:1})])),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[V])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(M.value.order_status),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[S])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)("IDR "+(0,d.zw)(e.$money((0,u.SU)(X).order_subtotal)),1)])),_:1})])),_:1}),M.value.order_discount?((0,a.wg)(),(0,a.j4)(i,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[I])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)((0,u.SU)(X).order_discount),1)])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Y,null,{default:(0,a.w5)((()=>[x])),_:1}),M.value.additional_cost_description?((0,a.wg)(),(0,a.j4)(Y,{key:0,caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(M.value.additional_cost_description),1)])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)("IDR "+(0,d.zw)(M.value.additional_cost_amount?e.$money(M.value.additional_cost_amount):0),1)])),_:1})])),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[z])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)("IDR "+(0,d.zw)(e.$money(M.value.tax_total)),1)])),_:1})])),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[C])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)("IDR "+(0,d.zw)(e.$money(M.value.order_total)),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(re,{modelValue:pe.value,"onUpdate:modelValue":l[4]||(l[4]=e=>pe.value=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(se,{class:"card-md"},{default:(0,a.w5)((()=>[(0,a._)("div",O,[Z,(0,a.wy)((0,a.Wm)(n,{flat:"",icon:"close",dense:""},null,512),[[be]])]),(0,a.Wm)(ae,null,{default:(0,a.w5)((()=>[(0,a._)("div",D,[(0,a.Wm)(le,{modelValue:(0,u.SU)(X).order_status,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,u.SU)(X).order_status=e),label:"Order Status",options:(0,u.SU)(ue)},null,8,["modelValue","options"]),(0,a.Wm)(te,{label:"Order Tax",modelValue:(0,u.SU)(X).order_tax,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,u.SU)(X).order_tax=e),suffix:"%"},null,8,["modelValue"]),(0,a.Wm)(te,{label:"Shipping Cost",modelValue:(0,u.SU)(X).shipping_cost,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,u.SU)(X).shipping_cost=e)},null,8,["modelValue"]),(0,a.Wm)(te,{type:"textarea",modelValue:(0,u.SU)(X).order_note,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,u.SU)(X).order_note=e),label:"Order Note"},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,a._)("div",Q,[R,(0,a._)("div",j,[(0,a.Wm)(te,{label:"Customer Name",modelValue:(0,u.SU)(X).customer_name,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,u.SU)(X).customer_name=e)},null,8,["modelValue"]),(0,a.Wm)(te,{label:"Customer Email",modelValue:(0,u.SU)(X).customer_email,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,u.SU)(X).customer_email=e)},null,8,["modelValue"]),(0,a.Wm)(te,{label:"Customer Phone ",modelValue:(0,u.SU)(X).customer_phone,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,u.SU)(X).customer_phone=e)},null,8,["modelValue"]),(0,a.Wm)(te,{type:"textarea",label:"Customer Address",rows:"3",modelValue:(0,u.SU)(X).customer_address,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,u.SU)(X).customer_address=e)},null,8,["modelValue"])])]),(0,a._)("div",P,[A,(0,a._)("div",T,[(0,a.Wm)(we,{modelValue:(0,u.SU)(ee),"onUpdate:modelValue":l[9]||(l[9]=e=>(0,u.dq)(ee)?ee.value=e:null),label:"Additional Cost Amount"},null,8,["modelValue"]),(0,a.Wm)(te,{label:"Additional Cost Description",modelValue:(0,u.SU)(X).additional_cost_description,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,u.SU)(X).additional_cost_description=e)},null,8,["modelValue"])])]),(0,a._)("div",H,[B,(0,a._)("div",F,[(0,a._)("table",$,[E,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(M.value.payments,(l=>((0,a.wg)(),(0,a.iD)("tr",{key:l.id},[(0,a._)("td",null,(0,d.zw)(l.ref),1),(0,a._)("td",null,(0,d.zw)(l.method.split("_").join(" "))+" - "+(0,d.zw)(l.name),1),(0,a._)("td",null,(0,d.zw)(l.payment_type),1),(0,a._)("td",null,[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(l.status),1)])),_:2},1024)]),(0,a._)("td",null," IDR "+(0,d.zw)(e.$money(l.payment_fee)),1),(0,a._)("td",null," IDR "+(0,d.zw)(e.$money(l.amount)),1)])))),128))])])])])])):(0,a.kq)("",!0),(0,a._)("div",N,[(0,a.Wm)(n,{label:"Back",color:"primary",outline:"",to:{name:"OrderIndex"}}),(0,a.Wm)(n,{onClick:de,label:"Update",color:"primary",unelevated:""})]),(0,a.Wm)(re,{modelValue:ie.value,"onUpdate:modelValue":l[12]||(l[12]=e=>ie.value=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(se,{class:"card-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(ae,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ve,{onSubmit:(0,o.iM)(ce,["prevent"])},{default:(0,a.w5)((()=>[K,(0,a.Wm)(te,{filled:"",required:"",modelValue:me.value,"onUpdate:modelValue":l[11]||(l[11]=e=>me.value=e)},null,8,["modelValue"]),(0,a._)("div",L,[(0,a.wy)((0,a.Wm)(n,{outline:"",color:"primary",label:"Cancel"},null,512),[[be]]),(0,a.Wm)(n,{unelavated:"",color:"primary",type:"submit",label:"Submit"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}};var Y=t(4379),G=t(1481),J=t(5926),X=t(2165),ee=t(7011),le=t(3414),te=t(2035),ae=t(2350),de=t(9721),ue=t(6778),oe=t(151),se=t(5589),ne=t(9396),re=t(4842),ie=t(5269),me=t(677),_e=t(7518),ce=t.n(_e);const pe=M,we=pe;ce()(M,"components",{QPage:Y.Z,QBreadcrumbs:G.Z,QBreadcrumbsEl:J.Z,QBtn:X.Z,QList:ee.Z,QItem:le.Z,QItemSection:te.Z,QItemLabel:ae.Z,QBadge:de.Z,QDialog:ue.Z,QCard:oe.Z,QCardSection:se.Z,QSelect:ne.Z,QInput:re.Z,QForm:ie.Z}),ce()(M,"directives",{ClosePopup:me.Z})}}]);