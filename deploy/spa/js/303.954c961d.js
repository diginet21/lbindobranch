"use strict";(self["webpackChunklbindobranch"]=self["webpackChunklbindobranch"]||[]).push([[303],{8303:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var o=a(3673),r=a(2323),i=a(8880);const l={class:"card-title"},t=(0,o._)("h2",null,"Reset Password",-1),n={class:"desc"},d={key:0},u={key:1},m={key:2,class:"text-red-7"},p={class:"q-py-md"},c={class:"q-mt-md"},w=(0,o.Uk)("Back to Login");function k(e,s,a,k,f,v){const b=(0,o.up)("q-input"),g=(0,o.up)("q-icon"),q=(0,o.up)("q-btn"),_=(0,o.up)("router-link"),y=(0,o.up)("q-form"),h=(0,o.up)("q-card-section"),P=(0,o.up)("q-card"),V=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(V,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(P,{class:"card-md q-pa-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o._)("div",l,[t,(0,o._)("div",n,[k.tokenIsValid?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",d,"Silahkan masukkan token anda")),k.tokenIsValid?((0,o.wg)(),(0,o.iD)("div",u,"Silahkan ganti password anda")):(0,o.kq)("",!0),k.errors&&k.errors.token?((0,o.wg)(),(0,o.iD)("div",m,(0,r.zw)(k.errors&&k.errors.token[0]),1)):(0,o.kq)("",!0)])]),(0,o.Wm)(y,{onSubmit:(0,i.iM)(k.submit,["prevent"])},{default:(0,o.w5)((()=>[(0,o._)("div",null,[k.tokenIsValid?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(b,{key:0,filled:"",modelValue:k.form.token,"onUpdate:modelValue":s[0]||(s[0]=e=>k.form.token=e),label:"Token",required:""},null,8,["modelValue"])),k.tokenIsValid?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Wm)(b,{type:k.isPwd?"password":"text",filled:"",modelValue:k.form.password,"onUpdate:modelValue":s[2]||(s[2]=e=>k.form.password=e),label:"Password",required:"",error:!(!k.errors||!k.errors.password)},{append:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"cursor-pointer",onClick:s[1]||(s[1]=e=>k.isPwd=!k.isPwd),name:k.isPwd?"visibility":"visibility_off"},null,8,["name"])])),error:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(k.errors.password[0]),1)])),_:1},8,["type","modelValue","error"]),(0,o.Wm)(b,{type:k.isPwd?"password":"text",filled:"",modelValue:k.form.password_confirmation,"onUpdate:modelValue":s[4]||(s[4]=e=>k.form.password_confirmation=e),label:"Konfirmasi Password",required:""},{append:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"cursor-pointer",onClick:s[3]||(s[3]=e=>k.isPwd=!k.isPwd),name:k.isPwd?"visibility":"visibility_off"},null,8,["name"])])),_:1},8,["type","modelValue"])],64)):(0,o.kq)("",!0),(0,o._)("div",p,[(0,o.Wm)(q,{loading:k.loading,label:"Reset Password",type:"submit",color:"primary",class:"full-width",unelevated:""},null,8,["loading"]),(0,o._)("div",c,[(0,o.Wm)(_,{to:"/auth/login"},{default:(0,o.w5)((()=>[w])),_:1})])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})}var f=a(1959),v=a(3617),b=a(9582),g=a(4434),q=a(5474);const _={setup(){const e=(0,v.oR)(),s=((0,b.yj)(),(0,b.tv)()),a=(0,f.qj)({token:"",email:"",password:"",password_confirmation:""}),o=(0,f.iH)(!1),r=(0,f.Fl)((()=>e.state.loading)),i=(0,f.Fl)((()=>e.state.errors)),l=()=>{e.commit("CLEAR_ERROR"),o.value?(0,q.BaseApi)().post("BaseApi/resetPassword",a).then((e=>{200==e.status&&(g.Z.create({type:"positive",message:"Behasil mereset password, silahkan login dengan password baru anda"}),s.push({name:"Login"}))})):(0,q.BaseApi)().post("auth/validateToken",a).then((e=>{if(200==e.status&&e.data.success){o.value=!0;const s=e.data.results;a.token=s.token,a.email=s.email}}))};return{form:a,submit:l,loading:r,errors:i,isPwd:(0,f.iH)(!0),tokenIsValid:o}}};var y=a(4260),h=a(4379),P=a(151),V=a(5589),W=a(5269),Z=a(4842),C=a(4554),I=a(2165),Q=a(7518),R=a.n(Q);const B=(0,y.Z)(_,[["render",k]]),x=B;R()(_,"components",{QPage:h.Z,QCard:P.Z,QCardSection:V.Z,QForm:W.Z,QInput:Z.Z,QIcon:C.Z,QBtn:I.Z})}}]);