"use strict";(self["webpackChunklbindobranch"]=self["webpackChunklbindobranch"]||[]).push([[744],{3744:(e,l,a)=>{a.r(l),a.d(l,{default:()=>se});a(71),a(246),a(9544);var t=a(3673),d=a(2323),u=a(8880),s=a(1959),n=a(3617);a(6611);const o={class:"q-py-sm"},i={class:"row items-center q-gutter-x-md"},m={class:"title"},r={class:"row q-gutter-x-sm q-mt-sm"},c={class:"col"},p={class:"col"},_={class:"col"},b={class:"card-column"},w={class:"table-responsive"},v={class:"table striped"},U=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"#"),(0,t._)("th",null,"Created"),(0,t._)("th",null,"Name"),(0,t._)("th",null,"Phone"),(0,t._)("th",null,"Type"),(0,t._)("th",null,"Status"),(0,t._)("th",{align:"right"},"Actions")])],-1),f={key:0},W={align:"right"},S={class:"q-gutter-sm"},g={key:0},h=(0,t._)("td",{colspan:"6"},[(0,t._)("div",{class:"text-center q-pa-xs"},"No data found")],-1),q=[h],k={key:0,class:"text-center q-py-md"},y={key:0,class:"q-pa-md text-center"},V=(0,t._)("div",{class:"card-header"},[(0,t._)("div",{class:"text-md"},"Edit Lead")],-1),C={class:"q-gutter-y-sm"},z={class:"flex justify-end q-gutter-x-sm q-mt-md items-center"},Q={class:"card-header flex justify-between items-center"},Z={class:"text-md"},x={class:"q-pa-sm"},D=(0,t.Uk)("Name"),L=(0,t.Uk)("Email"),F=(0,t.Uk)("Phone"),j=(0,t.Uk)("Lead Type"),N=(0,t.Uk)("Status"),E=(0,t.Uk)("Description / Message"),H={class:"flex justify-end q-gutter-x-sm q-mt-md q-pa-sm"},P={setup(e){const l=(0,n.oR)(),a=(0,s.Fl)((()=>l.state.lead.main_data)),h=(0,s.Fl)((()=>l.state.lead.lead_status));(0,t.wF)((()=>{h.value.length||l.dispatch("lead/getStatus"),K()}));const P=(0,s.Fl)((()=>{let e={value:"",label:"New"};return e=[e,...h.value.map((e=>({value:e.id,label:e.label})))],e})),B=((0,s.iH)(!1),(0,s.iH)(!1)),A=(0,s.iH)(!1),I=(0,s.iH)(null),M=(0,s.iH)("Leads"),T=(0,s.qj)({id:"",lead_status_id:"",customer_name:"",customer_phone:"",customer_email:"",lead_type:"",description:""}),R=()=>{l.dispatch("lead/updateStatus",{id:T.id,lead_status_id:T.lead_status_id}).then((()=>{l.dispatch("lead/getNewLeadCount"),K()})).finally((()=>{B.value=!1,A.value=!1}))},K=()=>{l.dispatch("lead/getAll",J)},Y=()=>{l.dispatch("lead/update",T).then((()=>{l.dispatch("lead/getAll"),l.dispatch("lead/getNewLeadCount")})).finally((()=>B.value=!1))},G=(0,s.Fl)((()=>l.state.loading)),J=(0,s.qj)({branch_id:"",limit:5,start:"",end:""}),O=()=>{let e={skip:a.value.data.length,limit:a.value.limit};e={...e,...J},l.dispatch("lead/paginateData",e)},X=()=>{l.dispatch("lead/filterData",J)},$=()=>{J.branch_id="",J.start="",J.end="",K()};return(e,l)=>{const n=(0,t.up)("q-breadcrumbs-el"),h=(0,t.up)("q-breadcrumbs"),K=(0,t.up)("q-input"),ee=(0,t.up)("q-select"),le=(0,t.up)("q-btn"),ae=(0,t.up)("q-form"),te=(0,t.up)("q-badge"),de=(0,t.up)("q-spinner-facebook"),ue=(0,t.up)("q-card-section"),se=(0,t.up)("q-card"),ne=(0,t.up)("q-dialog"),oe=(0,t.up)("q-item-section"),ie=(0,t.up)("q-item"),me=(0,t.up)("q-list"),re=(0,t.up)("q-page"),ce=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(re,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t._)("div",i,[(0,t._)("div",m,(0,d.zw)(M.value),1)]),(0,t.Wm)(h,{class:"text-grey","active-color":"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{label:"Dashboard"}),(0,t.Wm)(n,{label:M.value},null,8,["label"])])),_:1})]),(0,t.Wm)(ae,{class:"col",onSubmit:(0,u.iM)(X,["prevent"])},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t._)("div",c,[(0,t.Wm)(K,{"stack-label":"",label:"Start",filled:"",square:"",dense:"",type:"date",modelValue:(0,s.SU)(J).start,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,s.SU)(J).start=e)},null,8,["modelValue"])]),(0,t._)("div",p,[(0,t.Wm)(K,{"stack-label":"",label:"End",filled:"",square:"",dense:"",type:"date",modelValue:(0,s.SU)(J).end,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,s.SU)(J).end=e)},null,8,["modelValue"])]),(0,t._)("div",_,[(0,t.Wm)(ee,{required:"",filled:"","stack-label":"",square:"",dense:"",label:"Showing",options:[5,10,20,50,100],modelValue:(0,s.SU)(J).limit,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,s.SU)(J).limit=e)},null,8,["modelValue"])]),(0,t.Wm)(le,{type:"submit",label:"Filter",unelevated:"",color:"dark",disable:(0,s.SU)(G)},null,8,["disable"]),(0,t.Wm)(le,{type:"button",label:"Reset",unelevated:"",color:"dark",disable:(0,s.SU)(G),onClick:(0,u.iM)($,["prevent"])},null,8,["disable","onClick"])])])),_:1},8,["onSubmit"]),(0,t._)("div",b,[(0,t._)("div",w,[(0,t._)("table",v,[U,(0,s.SU)(a).ready?((0,t.wg)(),(0,t.iD)("tbody",f,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,s.SU)(a).data,((e,l)=>((0,t.wg)(),(0,t.iD)("tr",{key:e.id},[(0,t._)("td",null,(0,d.zw)(l+1),1),(0,t._)("td",null,(0,d.zw)(e.created_at),1),(0,t._)("td",null,(0,d.zw)(e.customer_name),1),(0,t._)("td",null,(0,d.zw)(e.customer_phone),1),(0,t._)("td",null,(0,d.zw)(e.lead_type),1),(0,t._)("td",null,[(0,t.Wm)(te,{color:e.status?e.status.color:"orange"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,d.zw)(e.status?e.status.label:"New"),1)])),_:2},1032,["color"])]),(0,t._)("td",W,[(0,t._)("div",S,[(0,t.Wm)(le,{round:"",icon:"edit",size:"sm",color:"blue",unelevated:"",to:{name:"LeadEdit",params:{id:e.id}}},null,8,["to"])])])])))),128)),(0,s.SU)(a).available?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("tr",g,q))])):(0,t.kq)("",!0)]),(0,s.SU)(a).ready?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",k,[(0,t.Wm)(de,{size:"2em"})]))])]),(0,s.SU)(a).count>(0,s.SU)(a).data.length?((0,t.wg)(),(0,t.iD)("div",y,[(0,t.Wm)(le,{loading:(0,s.SU)(G),label:"Loadmore..",outline:"",size:"md",color:"primary","no-caps":"",onClick:O},null,8,["loading"])])):(0,t.kq)("",!0),(0,t.Wm)(ne,{modelValue:B.value,"onUpdate:modelValue":l[9]||(l[9]=e=>B.value=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(se,{class:"card-lg"},{default:(0,t.w5)((()=>[V,(0,t.Wm)(ue,null,{default:(0,t.w5)((()=>[(0,t.Wm)(ae,{onSubmit:Y},{default:(0,t.w5)((()=>[(0,t._)("div",C,[(0,t.Wm)(ee,{outlined:"",options:(0,s.SU)(P),"emit-value":"","map-options":"",modelValue:(0,s.SU)(T).lead_status_id,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,s.SU)(T).lead_status_id=e),label:"Lead Status"},null,8,["options","modelValue"]),(0,t.Wm)(K,{outlined:"",label:"Customer name",modelValue:(0,s.SU)(T).customer_name,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,s.SU)(T).customer_name=e)},null,8,["modelValue"]),(0,t.Wm)(K,{outlined:"",label:"Customer Phone",modelValue:(0,s.SU)(T).customer_phone,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,s.SU)(T).customer_phone=e)},null,8,["modelValue"]),(0,t.Wm)(K,{outlined:"",label:"Customer Email",modelValue:(0,s.SU)(T).customer_email,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,s.SU)(T).customer_email=e)},null,8,["modelValue"]),(0,t.Wm)(K,{outlined:"",label:"Lead Type",modelValue:(0,s.SU)(T).lead_type,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,s.SU)(T).lead_type=e)},null,8,["modelValue"]),(0,t.Wm)(K,{outlined:"",type:"textarea",label:"Description",modelValue:(0,s.SU)(T).description,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,s.SU)(T).description=e)},null,8,["modelValue"])]),(0,t._)("div",z,[(0,t.wy)((0,t.Wm)(le,{label:"Cancel",outline:"",type:"button",color:"primary"},null,512),[[ce]]),(0,t.Wm)(le,{label:"Submit",unelevated:"",type:"submit",color:"primary"})])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(ne,{modelValue:A.value,"onUpdate:modelValue":l[11]||(l[11]=e=>A.value=e),persistent:""},{default:(0,t.w5)((()=>[I.value?((0,t.wg)(),(0,t.j4)(se,{key:0,class:"card-lg"},{default:(0,t.w5)((()=>[(0,t._)("div",Q,[(0,t._)("div",Z,"Lead "+(0,d.zw)(I.value.id),1)]),(0,t._)("div",x,[(0,t.Wm)(me,{separator:""},{default:(0,t.w5)((()=>[(0,t.Wm)(ie,null,{default:(0,t.w5)((()=>[(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[D])),_:1}),(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,d.zw)(I.value.customer_name),1)])),_:1})])),_:1}),(0,t.Wm)(ie,null,{default:(0,t.w5)((()=>[(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[L])),_:1}),(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,d.zw)(I.value.customer_email),1)])),_:1})])),_:1}),(0,t.Wm)(ie,null,{default:(0,t.w5)((()=>[(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[F])),_:1}),(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,d.zw)(I.value.customer_phone),1)])),_:1})])),_:1}),(0,t.Wm)(ie,null,{default:(0,t.w5)((()=>[(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[j])),_:1}),(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,d.zw)(I.value.lead_type),1)])),_:1})])),_:1}),(0,t.Wm)(ie,null,{default:(0,t.w5)((()=>[(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[N])),_:1}),(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[(0,t.Wm)(ee,{filled:"",square:"",options:(0,s.SU)(P),"emit-value":"","map-options":"",modelValue:(0,s.SU)(T).lead_status_id,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,s.SU)(T).lead_status_id=e),dense:""},null,8,["options","modelValue"])])),_:1})])),_:1}),(0,t.Wm)(ie,null,{default:(0,t.w5)((()=>[(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[E])),_:1}),(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,d.zw)(I.value.description),1)])),_:1})])),_:1})])),_:1}),(0,t._)("div",H,[(0,t.wy)((0,t.Wm)(le,{label:"Close",outline:"",color:"blue"},null,512),[[ce]]),(0,t.Wm)(le,{label:"Update",unelevated:"",onClick:R,color:"blue"})])])])),_:1})):(0,t.kq)("",!0)])),_:1},8,["modelValue"])])),_:1})}}};var B=a(4379),A=a(1481),I=a(5926),M=a(5269),T=a(4842),R=a(9396),K=a(2165),Y=a(9721),G=a(8719),J=a(6778),O=a(151),X=a(5589),$=a(7011),ee=a(3414),le=a(2035),ae=a(677),te=a(7518),de=a.n(te);const ue=P,se=ue;de()(P,"components",{QPage:B.Z,QBreadcrumbs:A.Z,QBreadcrumbsEl:I.Z,QForm:M.Z,QInput:T.Z,QSelect:R.Z,QBtn:K.Z,QBadge:Y.Z,QSpinnerFacebook:G.Z,QDialog:J.Z,QCard:O.Z,QCardSection:X.Z,QList:$.Z,QItem:ee.Z,QItemSection:le.Z}),de()(P,"directives",{ClosePopup:ae.Z})}}]);