"use strict";(self["webpackChunklbindobranch"]=self["webpackChunklbindobranch"]||[]).push([[452],{4452:(e,l,t)=>{t.r(l),t.d(l,{default:()=>_e});t(5363);var a=t(3673),u=t(2323),d=t(1959),o=t(8880),s=t(3617),r=t(6611),n=t(4434),m=t(9582);t(5474);const i={class:"q-py-sm"},_={class:"row items-center q-gutter-x-md"},c={class:"title"},p={class:"flex justify-end q-gutter-x-sm"},w={key:0},f={class:"card-column q-pa-md"},W=(0,a._)("div",{class:"card-title"},[(0,a._)("h2",null,"Products")],-1),U={class:"table striped"},v=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Description"),(0,a._)("th",null,"Qty"),(0,a._)("th",null,"Price"),(0,a._)("th",null,"Amount")])],-1),b={class:"card-column q-pa-md"},h=(0,a._)("div",{class:"card-title justify-between"},[(0,a._)("h2",null,"Order Info")],-1),y=(0,a.Uk)("INVOICE"),k=(0,a.Uk)("Type"),g=(0,a.Uk)("Status"),q=(0,a.Uk)("Subtotal"),S=(0,a.Uk)("Discount"),V=(0,a.Uk)("Shipping Cost"),x=(0,a.Uk)("Tax Total"),z=(0,a.Uk)("Order Total"),I={class:"card-title q-pa-md"},C=(0,a._)("h4",null,"Edit Order",-1),O={class:"q-gutter-y-sm"},Z={class:"card-column q-pa-md"},D=(0,a._)("div",{class:"card-title justify-between"},[(0,a._)("h2",null,"Customer Info")],-1),Q={class:"q-gutter-y-sm q-px-md"},R={class:"card-column q-pa-md"},j=(0,a._)("div",{class:"card-title"},[(0,a._)("h2",null,"Invoices")],-1),F={class:"q-pa-xs"},H=(0,a.Uk)("Reference"),P=(0,a.Uk)("Method"),T=(0,a.Uk)("Type"),B=(0,a.Uk)("Status"),$=(0,a.Uk)("Customer Fee"),E=(0,a.Uk)("Total Amount"),N={class:"q-gutter-x-sm flex justify-end q-pa-lg"},A=(0,a._)("div",{class:"text-md q-mb-sm"},"Resi Number",-1),K={class:"q-mt-md q-gutter-x-sm flex justify-end"},M={setup(e){const l=(0,s.oR)(),t=(0,m.yj)(),M=(0,d.iH)(null),Y=()=>{l.dispatch("order/getById",t.params.id).then((e=>{200==e.status&&(M.value=e.data.data,G(e.data.data))}))},L=(0,d.iH)(""),G=e=>{J.id=e.id,J.customer_name=e.customer_name,J.customer_phone=e.customer_phone,J.customer_email=e.customer_email,J.customer_address=e.customer_address,J.order_status=e.order_status,J.order_note=e.order_note,J.order_tax=e.order_tax,J.shipping_cost=e.shipping_cost,J.order_subtotal=e.order_subtotal,J.additional_cost_amount=e.additional_cost_amount?e.additional_cost_amount:"",J.additional_cost_description=e.additional_cost_description?e.additional_cost_description:"",L.value=e.invoice_id},J=(0,d.qj)({id:"",_method:"PUT",customer_name:"",customer_phone:"",customer_email:"",customer_address:"",order_note:"",order_tax:"",order_status:"",additional_cost_amount:"",shipping_cost:"",additional_cost_description:"",subtotal:0});(0,a.bv)((()=>Y()));(0,d.Fl)({get(){return J.additional_cost_amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},set(e){e&&(J.additional_cost_amount=e.split(".").join(""))}});const X=(0,d.Fl)((()=>parseInt(J.order_subtotal)*parseInt(J.order_tax)/100)),ee=(0,d.Fl)((()=>J.additional_cost_amount.length?parseInt(J.additional_cost_amount):0)),le=(0,d.Fl)((()=>M.value.order_subtotal+ee.value+M.value.shipping_cost)),te=(0,d.Fl)((()=>le.value+X.value)),ae=()=>{l.dispatch("order/update",J)},ue=(0,d.Fl)((()=>l.state.order.order_status_options)),de=()=>{r.Z.create({title:"Konfirmasi",message:'Ini akan merubah status pesanan menjadi "PROCESS"',cancel:!0}).onOk((()=>{oe()}))},oe=()=>{l.dispatch("order/process",M.value.id).then((()=>{Y(),n.Z.create({type:"positive",message:"Order has been successfully updated",position:"top-right"}),l.dispatch("order/getOrders")}))},se=()=>{l.dispatch("order/abort",M.value.id).then((()=>{Y(),n.Z.create({type:"positive",message:"Order has been successfully updated",position:"top-right"}),l.dispatch("order/getOrders")}))},re=(0,d.iH)(!1),ne=(0,d.iH)(""),me=()=>{re.value=!0},ie=()=>{re.value=!1,l.dispatch("order/inputResi",{order_id:M.value.id,resi_code:ne.value}).then((()=>{Y(),n.Z.create({type:"positive",message:"Order has been successfully updated",position:"top-right"}),l.dispatch("order/getOrders")}))},_e=(0,d.iH)(!1);(0,d.iH)(!1);return(e,l)=>{const t=(0,a.up)("q-breadcrumbs-el"),s=(0,a.up)("q-breadcrumbs"),r=(0,a.up)("q-btn"),n=(0,a.up)("q-item-section"),m=(0,a.up)("q-item"),Y=(0,a.up)("q-list"),G=(0,a.up)("q-select"),ee=(0,a.up)("q-input"),le=(0,a.up)("q-card-section"),oe=(0,a.up)("q-card"),ce=(0,a.up)("q-dialog"),pe=(0,a.up)("q-form"),we=(0,a.up)("q-page"),fe=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(we,{padding:""},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("div",_,[(0,a._)("div",c,"Order "+(0,u.zw)(L.value),1)]),(0,a.Wm)(s,{class:"text-grey","active-color":"secondary"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{label:"Dashboard"}),(0,a.Wm)(t,{label:"Order"})])),_:1})]),(0,a._)("div",p,[(0,a.Wm)(r,{to:{name:"OrderIndex"},color:"grey-8",size:"13px",label:"Back"}),(0,a.Wm)(r,{onClick:de,color:"blue",size:"13px",label:"Process Order"}),(0,a.Wm)(r,{onClick:me,color:"purple",size:"13px",label:"Input Resi"}),(0,a.Wm)(r,{onClick:se,color:"red",size:"13px",label:"Cancel Order"})]),M.value?((0,a.wg)(),(0,a.iD)("div",w,[(0,a._)("div",f,[W,(0,a._)("table",U,[v,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(M.value.items,(l=>((0,a.wg)(),(0,a.iD)("tr",{key:l.id},[(0,a._)("td",null,(0,u.zw)(l.product_name),1),(0,a._)("td",null,(0,u.zw)(l.quantity),1),(0,a._)("td",null,"IDR "+(0,u.zw)(e.$money(l.product_price)),1),(0,a._)("td",null,"IDR "+(0,u.zw)(e.$money(l.product_price*l.quantity)),1)])))),128))])])]),(0,a._)("div",b,[h,(0,a.Wm)(Y,{separator:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[y])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(M.value.invoice_id),1)])),_:1})])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[k])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(M.value.type_label),1)])),_:1})])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[g])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(M.value.order_status),1)])),_:1})])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[q])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)("IDR "+(0,u.zw)(e.$money((0,d.SU)(J).order_subtotal)),1)])),_:1})])),_:1}),M.value.order_discount?((0,a.wg)(),(0,a.j4)(m,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[S])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)((0,d.SU)(J).order_discount),1)])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[V])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)("IDR "+(0,u.zw)(e.$money((0,d.SU)(J).shipping_cost)),1)])),_:1})])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[x])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)("IDR "+(0,u.zw)((0,d.SU)(X)),1)])),_:1})])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[z])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)("IDR "+(0,u.zw)(e.$money((0,d.SU)(te))),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(ce,{modelValue:_e.value,"onUpdate:modelValue":l[4]||(l[4]=e=>_e.value=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{class:"card-md"},{default:(0,a.w5)((()=>[(0,a._)("div",I,[C,(0,a.wy)((0,a.Wm)(r,{flat:"",icon:"close",dense:""},null,512),[[fe]])]),(0,a.Wm)(le,null,{default:(0,a.w5)((()=>[(0,a._)("div",O,[(0,a.Wm)(G,{modelValue:(0,d.SU)(J).order_status,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,d.SU)(J).order_status=e),label:"Order Status",options:(0,d.SU)(ue)},null,8,["modelValue","options"]),(0,a.Wm)(ee,{label:"Order Tax",modelValue:(0,d.SU)(J).order_tax,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,d.SU)(J).order_tax=e),suffix:"%"},null,8,["modelValue"]),(0,a.Wm)(ee,{label:"Shipping Cost",modelValue:(0,d.SU)(J).shipping_cost,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,d.SU)(J).shipping_cost=e)},null,8,["modelValue"]),(0,a.Wm)(ee,{type:"textarea",modelValue:(0,d.SU)(J).order_note,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,d.SU)(J).order_note=e),label:"Order Note"},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,a._)("div",Z,[D,(0,a._)("div",Q,[(0,a.Wm)(ee,{label:"Customer Name",modelValue:(0,d.SU)(J).customer_name,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,d.SU)(J).customer_name=e)},null,8,["modelValue"]),(0,a.Wm)(ee,{label:"Customer Email",modelValue:(0,d.SU)(J).customer_email,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,d.SU)(J).customer_email=e)},null,8,["modelValue"]),(0,a.Wm)(ee,{label:"Customer Phone ",modelValue:(0,d.SU)(J).customer_phone,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,d.SU)(J).customer_phone=e)},null,8,["modelValue"]),(0,a.Wm)(ee,{type:"textarea",label:"Customer Address",modelValue:(0,d.SU)(J).customer_address,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,d.SU)(J).customer_address=e)},null,8,["modelValue"])])]),(0,a._)("div",R,[j,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(M.value.payments,(l=>((0,a.wg)(),(0,a.iD)("div",{key:l.id,class:"q-mb-md"},[(0,a._)("div",F,[(0,a.Wm)(Y,{separator:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[H])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.ref),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[P])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.method.split("_").join(" "))+" - "+(0,u.zw)(l.name),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[T])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.payment_type),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[B])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.status),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[$])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)("IDR "+(0,u.zw)(e.$money(l.payment_fee)),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[E])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Uk)("IDR "+(0,u.zw)(e.$money(l.amount)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])])))),128))])])):(0,a.kq)("",!0),(0,a._)("div",N,[(0,a.Wm)(r,{label:"Back",color:"primary",outline:"",to:{name:"OrderIndex"}}),(0,a.Wm)(r,{onClick:ae,label:"Update",color:"primary",unelevated:""})]),(0,a.Wm)(ce,{modelValue:re.value,"onUpdate:modelValue":l[10]||(l[10]=e=>re.value=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{class:"card-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(le,null,{default:(0,a.w5)((()=>[(0,a.Wm)(pe,{onSubmit:(0,o.iM)(ie,["prevent"])},{default:(0,a.w5)((()=>[A,(0,a.Wm)(ee,{filled:"",required:"",modelValue:ne.value,"onUpdate:modelValue":l[9]||(l[9]=e=>ne.value=e)},null,8,["modelValue"]),(0,a._)("div",K,[(0,a.wy)((0,a.Wm)(r,{outline:"",color:"primary",label:"Cancel"},null,512),[[fe]]),(0,a.Wm)(r,{unelavated:"",color:"primary",type:"submit",label:"Submit"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}};var Y=t(4379),L=t(1481),G=t(5926),J=t(2165),X=t(7011),ee=t(3414),le=t(2035),te=t(6778),ae=t(151),ue=t(5589),de=t(9396),oe=t(4842),se=t(5269),re=t(677),ne=t(7518),me=t.n(ne);const ie=M,_e=ie;me()(M,"components",{QPage:Y.Z,QBreadcrumbs:L.Z,QBreadcrumbsEl:G.Z,QBtn:J.Z,QList:X.Z,QItem:ee.Z,QItemSection:le.Z,QDialog:te.Z,QCard:ae.Z,QCardSection:ue.Z,QSelect:de.Z,QInput:oe.Z,QForm:se.Z}),me()(M,"directives",{ClosePopup:re.Z})}}]);